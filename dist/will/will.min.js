/*! WillJS v1.7.0 | github.com/kawamanza/willjs/ */
(function(w,M,p,C){function x(a){this.name=a;this.constructor=x}function t(a){return"string"===typeof a}function u(a){return"[object Array]"===W.call(a)}function z(a){return"object"!==typeof a}function r(a){return"function"===typeof a}function D(a,b){var c,d,e,f;for(d in b)if(b.hasOwnProperty(d))if(f=b[d],":"==d.charAt(0))a[d.substr(1)]=f;else if(1<(c=d.split(/\./)).length){d=c.shift();e=a[d];if(z(e)||u(e))e=a[d]={};d=c.join(".");c=f;d&&((c={})[d]=f);D(e,c)}else/\W$/.test(d)?(d=RegExp["$`"],c={get:function(){},
set:function(){},enumerable:!0,configurable:!0},r(f)?"="==RegExp["$&"]?c.set=f:c.get=f:D(c,f),Object.defineProperty(a,d,c)):a[d]=f}function m(a){for(var b,c,d,e=1,f=arguments,l=f.length;e<l;e++)b=f[e],t(b)?d=b:b&&(c=b,d&&((c={})[d]=b),D(a,c));return a}function X(a,b){return function(){return b.apply(a,arguments)}}function N(a,b){var c=q.createElement(a),d;for(d in b)b.hasOwnProperty(d)&&c.setAttribute(d,b[d]);return c}function E(a,b){var c,d,e,f,l,g,h,k,n;t(a)?f=/\@/.test(a):(c=a.src||a.href,d=a.getAttribute(O),
a=(d?d+"@":"")+c);if(Y.test(a)){d=RegExp.$1;c=RegExp.$2;e=RegExp.$3;h=c.charAt(0);k="^"==h;n="+"==h;if(k||n)c=c.substr(1);b&&"."==c.charAt(0)&&(c=N("script",{src:b+c}).src);/^\/\//.test(c)&&"https:"!=Z&&(c="http:"+c)}l=$.test(c);d||(g=c.split(aa),h=g.pop(),d=ba.test(h)?RegExp.$1:h,l&&(ca.test(g[0])&&g.shift(),g.push(d),d=g.join("_").replace(/:/,"-")));m(this,{id:d,fixedId:f,pre:k,pos:n,css:l,tn:l?"link":"script",qs:e||"",href:c})}function da(a){var b=a.id,c=a.href,d=a.css,e=q.getElementsByTagName(a.tn),
f,l=e.length,g,h;for(f=0;f<l;)if(g=e[f++],h=new E(g),h.id===b)return a.fixedId&&(d&&h.href!=c)&&(g.href=c+(a.qs||h.qs)),[d,g];return!1}function ea(a,b,c,d){var e=!1;a.onload=a.onreadystatechange=function(){var f=this.readyState;if(!e&&(!f||"loaded"===f||"complete"===f))e=!0,c(s),a.onload=a.onreadystatechange=p,a.onerror=a.onabort=p,d&&(b&&a.parentNode)&&b.removeChild(a)};a.onerror=a.onabort=function(){e=!0;c("error");a.onload=a.onreadystatechange=p;a.onerror=a.onabort=p;b&&a.parentNode&&b.removeChild(a)}}
function F(){return q.getElementsByTagName("head")[0]||q.documentElement}function P(a,b){var c,d=q.getElementsByTagName("link"),e=d.length;for(c=0;c<e;c++){if(d[c]===a)return!0;if(d[c]===b)return!1}}function A(a,b){(b=b||q.getElementsByTagName("link")[0])?F().insertBefore(a,b):F().appendChild(a)}function y(a){m(this,{queue:[],active:!1,run:a})}function fa(a,b,c,d,e){var f=F(),l=b.css,g=b.href,h=b.qs,k=a.cfg.queryString;h?k=h.substr(1):r(k)?k=k(g):k||(k=(h=a.info.qs)?h.substr(1):"");a={};a[O]=b.id;
l&&(a.rel="stylesheet");a[l?"href":"src"]=g+(k?"?"+k:"");a=N(b.tn,a);l?(b.pre?A(a,c):c&&c.nextSibling?f.insertBefore(a,c.nextSibling):A(a),d(s,a)):(ea(a,f,d,e),f.appendChild(a))}function Q(a,b,c,d){var e=this,f=!1,l,g,h,k,n;d||(d=G);k=h=function(){f||(n=d.info,e=this,l=arguments,c||(g=l),k.pluginFile==b&&n.min&&(b=k.pluginFile.replace(ga,".min.js")),d.use("willjsPlugin-"+a+"@"+n.dir+b+n.qs)(function(b){f=!0;b===s&&(h=e[a].apply(e,g),c&&h.apply(e,l))}))};c&&(k=function(){g=arguments;e=this;return function(){h.apply(e,
arguments)}});k.pluginFile=b;e[a]=k}function R(a,b){"cfg"in a||(m(a,{registry:{},cfg:m(new S,{processors:new H,assetsList:{jquery:["//ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js?"]},assetsTargetList:{js:{},css:{}},domains:{local:{format:"js"}},packages:{}})}),"use"in a||m(a,v));r(b)&&b(a.cfg)}function T(a,b,c){var d="impl";t(c)&&(d=c,c=b[d]);b[d]=function(){var e=arguments,f=b.assets;b.getResponder?(c=b.getResponder(a),delete b.getResponder):b.getImpl&&(c=b.getImpl(a),delete b.getImpl);f&&
f.length?I(a,"loadDependenciesAndCall",[a,b,e]):(b[d]="impl"==d?X(a,c):c).apply(b,e)}}function J(a,b,c){if(!z(b)){t(c)&&(c=new B(a,c));var d=b.impl,e=b.assets;if(r(d||b.getImpl||b.getResponder))c=c.entry,c.assets=z(e)||!u(e)?[]:e,c.getResponder=b.getResponder||b.getImpl,T(a,c,d),c.rescue=b.rescue||c.rescue;else for(d in b)c.name=d,J(a,b[d],c)}}function B(a,b){var c=a.cfg,d=c.domains,e=a.modes,f,l;ha.test(b)&&(b=RegExp.$3,l=RegExp.$2||c.packages[b]||c.defaultPackage,f=RegExp.$1||"local");d=d[f]||d.local||
{};m(this,{domainName:f,packageName:l,name:b,base:d.domain,format:d.format||"json",prod:(d.mode||c.mode||e.DEV)==e.PROD,ctx:a})}function I(a,b,c){a=a.cfg.processors;var d=a[b];d||(d=a[b]=new y(function(a){r(a)&&a()}));d.process(c)}function U(a,b,c){var d={assets:b};return function(b,f){if(!d.impl){var l,g;r(b)?(l=function(){b(s)},g=function(){b("error")}):l=g=function(){};T(a,d,l);d.dir=f;d.rescue=g;d.removeElement=c;d.impl()}}}function H(){}function S(){}var G,v={},O="data-willjs-id",s="success",
$=/\.css$/,ga=/\.js$/,aa=/\/+/,ca=/^[\^\+]?(?:\w+:|)$/,K=/^(?:[^@]+@)?\|/,ba=/^([\w\-\.]+?)(?:\.min|\-\d+(?:\.\d+)*(?:\.?\w+)?)*\.(?:css|js)$/,Y=/^(?:([\w\-\.]+)\@)?([^#\?]+)(?:(\?[^#]*))?/,V=/^[\w\-]+$/,ha=/^(?:(\w+):)?(?:(\w+)\.)?(\w+)$/,L=Array.prototype.slice,W=Object.prototype.toString,Z=w.location.protocol,q=w.document;m(y.prototype,{sched:function(){var a=this;setTimeout(function(){a.process()},0)},process:function(a){var b=this,c=b.queue;if(arguments.length){if(z(a)||!u(a))a=[a];c.push(a);
setTimeout(function(){c.length&&!b.active&&(b.active=!0,b.process())},2)}else if(c.length){a=c.shift();try{!1!==b.run.apply(b,a)&&b.sched()}catch(d){throw b.sched(),d;}}else b.active=!1}});m(B.prototype,{"dir!":function(){var a=this.ctx,b=this.packageName;return(this.base||a.info.dom)+(this.prod||b==a.cfg.defaultPackage?"":b+"/")},"url!":function(){return this.dir+(this.prod?this.packageName:this.name)+"."+this.format},"entry!":function(){var a=this.ctx.registry,b=this.domainName,c=this.packageName,
a=a[b]||(a[b]={}),c=a[c]||(a[c]={}),a=this.name;return c[a]||(c[a]={rescue:function(){},dir:this.dir})},toString:function(){return this.domainName+":"+this.packageName+"."+this.name}});m(v,{use:function(a){return U(this,u(a)?a:L.call(arguments,0),!1)},addComponent:function(a,b){1==arguments.length&&(b=a,a=new B(this,"unknown"));J(this,b,a)},define:function(a,b,c){r(b)&&(c=b,b=[]);this.addComponent(a,{assets:b,getResponder:c})},addProcessor:function(a,b){var c=this.cfg.processors;c[a]||(c[a]=new y(b))},
process:function(a){I(this,a,L.call(arguments,1))},modes:{DEV:2,PROD:1},as:function(a){return!a?a:w[a]||(w[a]=new x(a))},configure:function(a){this.configured=!0;R(this,a);return this},":info!":function(){var a=this._info,b,c,d,e;if(!a){b=q.getElementsByTagName("script");C||(C="will");d=0;for(c=b.length;d<c;d++)if(e=new E(b[d]),e.id==C){b=e.href;this._info=a={href:b,qs:e.qs,min:/\.min\.js/.test(b),dir:b=b.replace(/\/(?:will\/)*[^\/]+$/,"/will/"),dom:b+"components/"};break}}return a}});m(v,"u",{hit:Q,
Processors:H,Processor:y,Path:B,process:I,requireAssets:U,registerFunctions:J,extend:m});m(x.prototype,v);m(S.prototype,{mode:v.modes.DEV,version:"1.7.0",addDomain:function(a,b,c,d){b&&(b+=/\/$/.test(b)?"":"/");this.domains[a]={format:t(c)?c:c?"js":"json",domain:b,mode:d}},addAssetsList:function(a){if(!V.test(a))throw Error("invalid term: "+a);this.assetsList[a]=L.call(arguments,1)},translateAssetTo:function(a,b){t(b)&&(b=b.split(","));u(a)||(a=[a]);for(var c=this.assetsTargetList,d=0,e=b.length,
f,c=c[/\.css/.test(a[0])?"css":"js"];d<e;)f=b[d++],-1==a.indexOf(f)&&(c[f]=a)},defaultPackage:"root",registerPackage:function(a,b){var c=b.split(/,/),d,e,f;d=this.packages;f=0;for(e=c.length;f<e;)d[c[f++]]=a}});H.prototype.loadDependenciesAndCall=new y(function(a,b,c){var d=this,e=a.cfg,f=e.assetsList,l=e.assetsTargetList,e=e.debug,g,h=b.assets,k=b.dir,n,m;if(h.length){if(V.test(g=h[0]))if(u(g=f[g])){n=0;for(f=g.length;n<f;n++)if(/\.css(?:[?#].*)?$/.test(g[n])){/\^/.test(g[n])&&(delete b.bottomCss,
delete b.lastCss);break}g=g.slice(0);g.splice(0,0,0,1);h.splice.apply(h,g)}else{b.rescue.apply(p,c);return}g=new E(h[0],k);m=g.pre;f=g.pos;if(k=da(g)){h.shift();if(k[0]){if(a=b.lastCss)l=b.bottomCss.nextSibling,m&&P(a,k[1])?A(k[1],a):l&&P(k[1],b.bottomCss)&&A(k[1],l);if(!a||!m)b.bottomCss=k[1];b.lastCss=k[1]}for(;h.length&&K.test(h[0]);)h.shift();b.impl.apply(p,c)}else if(k=l[g.css?"css":"js"][g.id])e&&e('** skipping asset "'+g.href+'"'),h.splice.apply(h,[0,1].concat(k)),b.impl.apply(p,c);else{e&&
e('** loading asset "'+g.href+'"');if(f&&(k=q.getElementsByTagName(g.tn),0!=(f=k.length)))b.lastCss=b.bottomCss=k[f-1];fa(a,g,b[m?"lastCss":"bottomCss"],function(a,e){try{if(1<h.length&&K.test(h[1]))if(a===s){do h.shift();while(1<h.length&&K.test(h[1]))}else h[1]=h[1].replace(/\|/,""),a=s;if(a===s){h.shift();if(e){if(!b.lastCss||!m)b.bottomCss=e;b.lastCss=e}b.impl.apply(p,c)}else b.rescue.apply(p,c)}finally{d.sched()}},b.removeElement);return!1}}else b.impl.apply(p,c)});w[M]=G=new x(M);R(G);v.u.hit("loadComponent",
"componentLoader.js");Q.call(x.prototype,"call","callComponent.js",!0)})(window,"will",null);
